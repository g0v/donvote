{% extends 'two-column.jade' %}
{% load angularjs %}
{% load staticfiles %}
{% block 'content' %}
script(typ="text/javascript",src="{% static 'js/votedetail.js' %}")
#vote-detail(ng-controller="votedetail")
  script.
    var voteid = '{{vote.pk}}';
  div(style="position:absolute;text-align:right;right:0")
    .btn.btn-primary(ng-click="settype('verticalBar')") Vertical
    .btn.btn-primary(ng-click="settype('horizontalBar')") Horizontal
    .btn.btn-primary(ng-click="settype('pieChart')") Pie Chart
  svg#vote-chart(preserveAspectRatio="xMidYMid",style="border:1px solid #00")
  //-svg#vote-chart3(preserveAspectRatio="xMidYMid",style="border:1px solid #000")
  .vote-title {{vote.name}}
  .vote-brief.text-center
    .prop
      i.glyphicon.glyphicon-calendar
      |  表决時間從 2014.7.2 12:00 到 2014.8.2 12:00 止 
    .prop
      i.glyphicon.glyphicon-th-list
      |  共 5 個方案，多選式表决 
    .prop
      i.glyphicon.glyphicon-exclamation-sign
      |  投票率門檻 75%
  br
  .ribbon-red 說明
  //-.vote-desc {{vote.desc}}
  .panel.panel-default.vote-desc
    .panel-body {{vote.desc}}
  br
  .ribbon-orange 提案細節
  .bl-orange
    | 提案細節，例如：票選方式、開始結束條件、有效條件等等
  br
  .ribbon-yellow 候選項目
  .btn.btn-link.pull-right(ng-click="togglenewplan=!togglenewplan")
    i.glyphicon.glyphicon-plus
      |  我想新增方案
  .bl-yellow
    .panel.panel-default(ng-show="togglenewplan")
      form.panel-body
        .form-group
          label 方案名稱
          input.form-control(placeholder="方案名稱，例如：我同意這個提案")
        .form-group
          label 方案描述
          textarea.form-control(placeholder="請詳細描述這個方案的內容")
        .btn.btn-primary 新增方案
        .btn.btn-default(ng-click="togglenewplan=!togglenewplan") 取消這個動作
    {% for item in vote.plan.all %}
    .panel.panel-default.vote-item.panel-discuss
      .panel-heading {{item.name}}
      .panel-body
        {% if item.desc %}
        | {{item.desc}}
        {% else %}
        | 這個項目沒有寫描述。
        {% endif %}
    {% endfor %}
  br
  .ribbon-green 討論
  .bl-green
    #vote-comment.panel.panel-default.panel-discuss
      .panel-heading
        .btn.btn-link
          i.glyphicon.glyphicon-comment
          |  發表意見 
        .btn.btn-link.green(ng-click="comment.new.setPoint(1)")
          i.glyphicon.glyphicon-thumbs-up
          |  正方意見
          i.glyphicon.glyphicon-ok
        .btn.btn-link.gray(ng-click="comment.new.setPoint(2)")
          i.glyphicon.glyphicon-adjust
          |  中立意見
          i.glyphicon.glyphicon-minus
        .btn.btn-link.red(ng-click="comment.new.setPoint(3)")
          i.glyphicon.glyphicon-thumbs-down
          |  反方意見
          i.glyphicon.glyphicon-minus
        .clearfix
      .panel-body
        textarea(ng-model="comment.new.d.content",placeholder="想討論什麼？")
      .panel-footer
        .btn.btn-primary.pull-right(ng-click="comment.new.submit()") 發言
        .clearfix
    {% for discuss in vote.discuss.all %}
    .panel.panel-default.vote-post
      .panel-heading
        .avatar
        .ib
          .name
            | {{discuss.owner}}
            .target
              i.glyphicon.glyphicon-arrow-right
              |  Admin : " 大家來測試一下... "
          .desc
            span.time {{discuss.createDate}}
            span.label.label-success
              i.glyphicon.glyphicon-thumbs-up
              |  支持
        .clearfix
      .panel-body
        | {{discuss.content}}
      .panel-footer
        .btn.btn-link 
          i.glyphicon.glyphicon-thumbs-up
          |  支持
        .btn.btn-link 
          i.glyphicon.glyphicon-hand-right
          |  中立
        .btn.btn-link
          i.glyphicon.glyphicon-thumbs-down
          |  反對
        .btn.btn-link.pull-right
          |  回覆
    {% endfor %}

    .panel.panel-default.vote-post
      .panel-heading
        .avatar
        .ib
          .name
            | Kirby Wu
            .target
              i.glyphicon.glyphicon-arrow-right
              |  Admin : " 大家來測試一下... "
          .desc
            span.time 六分鐘前 
            span.label.label-success
              i.glyphicon.glyphicon-thumbs-up
              |  支持
        .clearfix
      .panel-body
        | 這是一個測試用的留言。
      .panel-footer
        .btn.btn-link 
          i.glyphicon.glyphicon-thumbs-up
          |  支持
        .btn.btn-link 
          i.glyphicon.glyphicon-hand-right
          |  中立
        .btn.btn-link
          i.glyphicon.glyphicon-thumbs-down
          |  反對
        .btn.btn-link.pull-right
          |  回覆

      .panel-body.reply
        .row
          .col-sm-1(style="width: 42px")
            .avatar
          .col-sm-10
            .name Kirby Wu
            .desc
              span.time 六分鐘前
              br
              | 這是一個簡單測試用的回覆

{% endblock %}

